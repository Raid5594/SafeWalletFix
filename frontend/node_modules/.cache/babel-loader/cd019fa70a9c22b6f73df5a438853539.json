{"ast":null,"code":"var _jsxFileName = \"/Users/Raid/test/testpApp3/SafeWalletFix/frontend/src/containerComponents/BlockchainData.js\";\nimport React, { Component } from 'react';\nimport Web3 from 'web3';\nimport { MULTISIG_ABI, MULTISIG_ADDRESS, MULTISIG_ERC20_ABI, MULTISIG_ERC20_ADDRESS, ERC20_ABI, TOKENIMPERIAL_ADDRESS, TOKENDEMOCRATIC_ADDRESS, TOKENIMPERIAL_SYMBOL, TOKENDEMOCRATIC_SYMBOL } from '../config';\nimport SmartContract from './multisigEtherWallet/SmartContract';\nimport ERC20 from './erc20/ERC20';\nimport '../css/ButtonGroup.css';\nimport store from '../redux/store';\n/* Validate forms, clear data in forms, check that transaction transfer works correctly*/\n\nclass BlockchainData extends Component {\n  constructor(props) {\n    super(props);\n\n    this.updateBalances = () => {\n      let etherBalance = null;\n      let contractBalance = null;\n      this.state.multisig.methods.balances(this.state.etherAddress).call({\n        from: this.state.etherAddress\n      }, (error, balance) => {\n        if (error) {\n          console.log(error);\n        } else {\n          contractBalance = balance;\n          this.state.web3.eth.getBalance(this.state.etherAddress, (error, balance) => {\n            if (error) {\n              console.log(error, 'Something went wrong');\n            } else {\n              etherBalance = balance;\n              console.log(etherBalance);\n              console.log('Ether', etherBalance);\n              this.setState({\n                contractBalance: contractBalance,\n                etherBalance: etherBalance\n              });\n              console.log('New etherBalance : ', this.state.etherBalance);\n              console.log('New contractBalance : ', this.state.contractBalance);\n            }\n          });\n        }\n      });\n    };\n\n    this.updateERCBalances = () => {\n      this.state.tokenImperial.methods.balanceOf(this.state.etherAddress).call({\n        from: this.state.etherAddress\n      }, (error, balance) => {\n        if (error) {\n          console.log(error);\n        } else {\n          this.setState({\n            tokenImperialBalance: balance\n          });\n          console.log('The token Imperial balance of account is: ', this.state.tokenImperialBalance);\n        }\n      });\n      this.state.tokenDemocratic.methods.balanceOf(this.state.etherAddress).call({\n        from: this.state.etherAddress\n      }, (error, balance) => {\n        if (error) {\n          console.log(error);\n        } else {\n          this.setState({\n            tokenDemocraticBalance: balance\n          });\n          console.log('The token Democratic balance of account is: ', this.state.tokenDemocraticBalance);\n        }\n      });\n      this.state.multisigERC20Token.methods.tokenBalances(this.state.etherAddress, TOKENIMPERIAL_SYMBOL).call({\n        from: this.state.etherAddress\n      }, (error, balance) => {\n        if (error) {\n          console.log(error);\n        } else {\n          this.setState({\n            tokenImperialContractBalance: balance\n          });\n          console.log('The imperial token contract balance of account is: ', this.state.tokenImperialContractBalance);\n        }\n      });\n      this.state.multisigERC20Token.methods.tokenBalances(this.state.etherAddress, TOKENDEMOCRATIC_SYMBOL).call({\n        from: this.state.etherAddress\n      }, (error, balance) => {\n        if (error) {\n          console.log(error);\n        } else {\n          this.setState({\n            tokenDemocraticContractBalance: balance\n          });\n          console.log('The democratic token contract balance of account is: ', this.state.tokenDemocraticContractBalance);\n        }\n      });\n    };\n\n    this.onHandleClick = e => {\n      e.preventDefault();\n      var current = document.getElementsByClassName('active');\n      current[0].className = current[0].className.replace('active', '');\n      e.target.className += 'active';\n      const name = e.target.name;\n\n      switch (name) {\n        case 'Ethereum':\n          if (this.state.Ethereum !== true) {\n            this.setState({\n              'Ethereum': true\n            });\n          }\n\n          break;\n\n        case 'ERC20':\n          if (this.state.Ethereum === true) {\n            this.setState({\n              'Ethereum': false\n            });\n          }\n\n          break;\n\n        default:\n          break;\n      }\n    };\n\n    this.state = {\n      web3: '',\n      multisig: '',\n      etherAddress: '',\n      etherBalance: '',\n      tokenImperialBalance: '',\n      tokenDemocraticBalance: '',\n      contractBalance: '',\n      tokenImperialContractBalance: '',\n      tokenDemocraticContractBalance: '',\n      Ethereum: true\n    };\n    store.subscribe(() => {\n      const data = store.getState().data;\n      console.log(data.etherAddress);\n      this.setState({\n        etherAddress: data.etherAddress\n      });\n    });\n  }\n\n  componentDidMount() {\n    const web3 = new Web3('https://ropsten.infura.io/v3/a33baa265ae340c29c82373e91533edf');\n    this.setState({\n      web3: web3\n    });\n    const multisig = new web3.eth.Contract(MULTISIG_ABI, MULTISIG_ADDRESS);\n    this.setState({\n      multisig: multisig\n    });\n    const multisigERC20Token = new web3.eth.Contract(MULTISIG_ERC20_ABI, MULTISIG_ERC20_ADDRESS);\n    this.setState({\n      multisigERC20Token: multisigERC20Token\n    });\n    const tokenImperial = new web3.eth.Contract(ERC20_ABI, TOKENIMPERIAL_ADDRESS);\n    this.setState({\n      tokenImperial: tokenImperial\n    });\n    const tokenDemocratic = new web3.eth.Contract(ERC20_ABI, TOKENDEMOCRATIC_ADDRESS);\n    this.setState({\n      tokenDemocratic: tokenDemocratic\n    });\n    web3.eth.getBalance(this.state.etherAddress, (error, balance) => {\n      if (error) {\n        console.log(error);\n      } else {\n        this.setState({\n          etherBalance: balance\n        });\n        console.log('Account ether balance: ', this.state.etherBalance);\n      }\n    });\n    multisigERC20Token.methods.tokenBalances(this.state.etherAddress, TOKENIMPERIAL_SYMBOL).call({\n      from: this.state.etherAddress\n    }, (error, balance) => {\n      if (error) {\n        console.log(error);\n      } else {\n        this.setState({\n          tokenImperialContractBalance: balance\n        });\n        console.log('The imperial token contract balance of account is: ', this.state.tokenImperialContractBalance);\n      }\n    });\n    multisigERC20Token.methods.tokenBalances(this.state.etherAddress, TOKENDEMOCRATIC_SYMBOL).call({\n      from: this.state.etherAddress\n    }, (error, balance) => {\n      if (error) {\n        console.log(error);\n      } else {\n        this.setState({\n          tokenDemocraticContractBalance: balance\n        });\n        console.log('The democratic token contract balance of account is: ', this.state.tokenDemocraticContractBalance);\n      }\n    });\n    multisig.methods.balances(this.state.etherAddress).call({\n      from: this.state.etherAddress\n    }, (error, balance) => {\n      if (error) {\n        console.log(error);\n      } else {\n        this.setState({\n          contractBalance: balance\n        });\n        console.log('The contract balance of account is: ', this.state.contractBalance);\n      }\n    });\n    tokenImperial.methods.balanceOf(this.state.etherAddress).call({\n      from: this.state.etherAddress\n    }, (error, balance) => {\n      if (error) {\n        console.log(error);\n      } else {\n        this.setState({\n          tokenImperialBalance: balance\n        });\n        console.log('The token Imperial balance of account is: ', this.state.tokenImperialBalance);\n      }\n    });\n    tokenDemocratic.methods.balanceOf(this.state.etherAddress).call({\n      from: this.state.etherAddress\n    }, (error, balance) => {\n      if (error) {\n        console.log(error);\n      } else {\n        this.setState({\n          tokenDemocraticBalance: balance\n        });\n        console.log('The token Democratic balance of account is: ', this.state.tokenDemocraticBalance);\n      }\n    }); //this.interval = setInterval(this.updateBalances, 15000);\n    //this.interval = updateERCBalances(this.updateERCBalances, 15000);\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"content\",\n      className: \"smart\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"btnGroup\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"buttonInGroup active\",\n      name: \"Ethereum\",\n      onClick: this.onHandleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199\n      },\n      __self: this\n    }, \"Ethereum\"), React.createElement(\"button\", {\n      className: \"buttonInGroup\",\n      name: \"ERC20\",\n      onClick: this.onHandleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, \"ERC20\")), this.state.Ethereum ? React.createElement(SmartContract, {\n      address: this.props.etherAddress,\n      etherBalance: this.state.etherBalance,\n      contractBalance: this.state.contractBalance,\n      updateBalances: this.updateBalances,\n      web3: this.state.web3,\n      multisig: this.state.multisig,\n      multisigAddress: MULTISIG_ADDRESS,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }) : React.createElement(ERC20, {\n      web3: this.state.web3,\n      address: this.props.etherAddress,\n      tokenImperialBalance: this.state.tokenImperialBalance,\n      tokenDemocraticBalance: this.state.tokenDemocraticBalance,\n      tokenImperial: this.state.tokenImperial,\n      tokenDemocratic: this.state.tokenDemocratic,\n      multisigERC20Address: MULTISIG_ERC20_ADDRESS,\n      multisigERC20Token: this.state.multisigERC20Token,\n      tokenDemocraticContractBalance: this.state.tokenDemocraticContractBalance,\n      tokenImperialContractBalance: this.state.tokenImperialContractBalance,\n      updateERCBalances: this.updateERCBalances,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default BlockchainData;","map":{"version":3,"sources":["/Users/Raid/test/testpApp3/SafeWalletFix/frontend/src/containerComponents/BlockchainData.js"],"names":["React","Component","Web3","MULTISIG_ABI","MULTISIG_ADDRESS","MULTISIG_ERC20_ABI","MULTISIG_ERC20_ADDRESS","ERC20_ABI","TOKENIMPERIAL_ADDRESS","TOKENDEMOCRATIC_ADDRESS","TOKENIMPERIAL_SYMBOL","TOKENDEMOCRATIC_SYMBOL","SmartContract","ERC20","store","BlockchainData","constructor","props","updateBalances","etherBalance","contractBalance","state","multisig","methods","balances","etherAddress","call","from","error","balance","console","log","web3","eth","getBalance","setState","updateERCBalances","tokenImperial","balanceOf","tokenImperialBalance","tokenDemocratic","tokenDemocraticBalance","multisigERC20Token","tokenBalances","tokenImperialContractBalance","tokenDemocraticContractBalance","onHandleClick","e","preventDefault","current","document","getElementsByClassName","className","replace","target","name","Ethereum","subscribe","data","getState","componentDidMount","Contract","componentWillUnmount","clearInterval","interval","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Web3 from 'web3';\nimport { MULTISIG_ABI, MULTISIG_ADDRESS, MULTISIG_ERC20_ABI, MULTISIG_ERC20_ADDRESS, ERC20_ABI, \n\tTOKENIMPERIAL_ADDRESS, TOKENDEMOCRATIC_ADDRESS, TOKENIMPERIAL_SYMBOL, TOKENDEMOCRATIC_SYMBOL } from '../config';\nimport SmartContract from './multisigEtherWallet/SmartContract'; \nimport ERC20 from './erc20/ERC20';\nimport '../css/ButtonGroup.css';\nimport store from '../redux/store';\n\n\n/* Validate forms, clear data in forms, check that transaction transfer works correctly*/ \nclass BlockchainData extends Component {\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tweb3: '',\n\t\t\tmultisig: '',\n\t\t\tetherAddress: '',\n\t\t\tetherBalance: '',\n\t\t\ttokenImperialBalance: '',\n\t\t\ttokenDemocraticBalance: '',\n\t\t\tcontractBalance: '',\n\t\t\ttokenImperialContractBalance: '',\n\t\t\ttokenDemocraticContractBalance: '',\n\t\t\tEthereum: true\n\t\t};\n\n\t\tstore.subscribe(() => {\n            const data = store.getState().data;\n            console.log(data.etherAddress);\n            this.setState({ \n                etherAddress: data.etherAddress\n            });\n        })\n\t}\n\n\tcomponentDidMount() {\n\t\tconst web3 = new Web3('https://ropsten.infura.io/v3/a33baa265ae340c29c82373e91533edf');\n\t\tthis.setState({ web3: web3 });\n\t\tconst multisig = new web3.eth.Contract(MULTISIG_ABI, MULTISIG_ADDRESS);\n\t\tthis.setState({ multisig: multisig });\n\t\tconst multisigERC20Token = new web3.eth.Contract(MULTISIG_ERC20_ABI, MULTISIG_ERC20_ADDRESS);\n\t\tthis.setState({ multisigERC20Token: multisigERC20Token });\n\t\tconst tokenImperial = new web3.eth.Contract(ERC20_ABI, TOKENIMPERIAL_ADDRESS);\n\t\tthis.setState({ tokenImperial: tokenImperial });\n\t\tconst tokenDemocratic = new web3.eth.Contract(ERC20_ABI, TOKENDEMOCRATIC_ADDRESS);\n\t\tthis.setState({ tokenDemocratic: tokenDemocratic });\n\t\tweb3.eth.getBalance(this.state.etherAddress, (error, balance) => {\n\t\t\t\tif (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t} else {\n\t\t\t\tthis.setState({ etherBalance: balance });\n\t\t\t\tconsole.log('Account ether balance: ', this.state.etherBalance);\n\t\t\t}\n\t\t});\n\t\tmultisigERC20Token.methods.tokenBalances(this.state.etherAddress, TOKENIMPERIAL_SYMBOL).call({from: this.state.etherAddress}, (error, balance) => {\n\t\t\tif (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t} else {\n\t\t\t\tthis.setState({ tokenImperialContractBalance: balance });\n\t\t\t\t\tconsole.log('The imperial token contract balance of account is: ', this.state.tokenImperialContractBalance);\n\t\t\t}\n\t\t});\n\n\t\tmultisigERC20Token.methods.tokenBalances(this.state.etherAddress, TOKENDEMOCRATIC_SYMBOL).call({from: this.state.etherAddress}, (error, balance) => {\n\t\t\tif (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t} else {\n\t\t\t\tthis.setState({ tokenDemocraticContractBalance: balance });\n\t\t\t\tconsole.log('The democratic token contract balance of account is: ', this.state.tokenDemocraticContractBalance);\n\t\t\t}\n\t\t});\n\n\t\tmultisig.methods.balances(this.state.etherAddress).call({from: this.state.etherAddress}, (error, balance) => {\n\t\t\tif (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t} else {\n\t\t\t\tthis.setState({ contractBalance: balance });\n\t\t\t\tconsole.log('The contract balance of account is: ', this.state.contractBalance);\n\t\t\t}\n\t\t});\n\n\t\ttokenImperial.methods.balanceOf(this.state.etherAddress).call({from: this.state.etherAddress}, (error, balance) => {\n\t\t\tif (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t} else {\n\t\t\t\tthis.setState({ tokenImperialBalance: balance });\n\t\t\t\tconsole.log('The token Imperial balance of account is: ', this.state.tokenImperialBalance);\n\t\t\t}\n\t\t});\n\n\t\ttokenDemocratic.methods.balanceOf(this.state.etherAddress).call({from: this.state.etherAddress}, (error, balance) => {\n\t\t\tif (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t} else {\n\t\t\t\tthis.setState({ tokenDemocraticBalance: balance });\n\t\t\t\tconsole.log('The token Democratic balance of account is: ', this.state.tokenDemocraticBalance);\n\t\t\t}\n\t\t});\n\n\t\t//this.interval = setInterval(this.updateBalances, 15000);\n\t\t//this.interval = updateERCBalances(this.updateERCBalances, 15000);\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearInterval(this.interval);\n\t}\n\n\tupdateBalances = () => {\n\t\tlet etherBalance = null;\n\t\tlet contractBalance = null\n\t\tthis.state.multisig.methods.balances(this.state.etherAddress).call({ from: this.state.etherAddress }, (error, balance) => {\n\t\t\tif (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t} else {\n\t\t\t\tcontractBalance = balance;\n\t\t\t\tthis.state.web3.eth.getBalance(this.state.etherAddress, (error, balance) => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\tconsole.log(error, 'Something went wrong');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tetherBalance = balance;\n\t\t\t\t\t\tconsole.log(etherBalance);\n\t\t\t\t\t\tconsole.log('Ether',etherBalance);\n\t\t\t\t\t\tthis.setState({ contractBalance : contractBalance, etherBalance : etherBalance});\n\t\t\t\t\t\tconsole.log('New etherBalance : ', this.state.etherBalance);\n\t\t\t\t\t\tconsole.log('New contractBalance : ', this.state.contractBalance);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\tupdateERCBalances = () => {\n\t\t\n\t\tthis.state.tokenImperial.methods.balanceOf(this.state.etherAddress).call({from: this.state.etherAddress}, (error, balance) => {\n\t\t\tif (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t} else {\n\t\t\t\tthis.setState({ tokenImperialBalance: balance });\n\t\t\t\tconsole.log('The token Imperial balance of account is: ', this.state.tokenImperialBalance);\n\t\t\t}\n\t\t});\n\n\t\tthis.state.tokenDemocratic.methods.balanceOf(this.state.etherAddress).call({from: this.state.etherAddress}, (error, balance) => {\n\t\t\tif (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t} else {\n\t\t\t\tthis.setState({ tokenDemocraticBalance: balance });\n\t\t\t\tconsole.log('The token Democratic balance of account is: ', this.state.tokenDemocraticBalance);\n\t\t\t}\n\t\t});\n\n\t\tthis.state.multisigERC20Token.methods.tokenBalances(this.state.etherAddress, TOKENIMPERIAL_SYMBOL).call({from: this.state.etherAddress}, (error, balance) => {\n\t\t\tif (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t} else {\n\t\t\t\tthis.setState({ tokenImperialContractBalance: balance });\n\t\t\t\tconsole.log('The imperial token contract balance of account is: ', this.state.tokenImperialContractBalance);\n\t\t\t}\n\t\t});\n\n\t\tthis.state.multisigERC20Token.methods.tokenBalances(this.state.etherAddress, TOKENDEMOCRATIC_SYMBOL).call({from: this.state.etherAddress}, (error, balance) => {\n\t\t\tif (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t} else {\n\t\t\t\tthis.setState({ tokenDemocraticContractBalance: balance });\n\t\t\t\tconsole.log('The democratic token contract balance of account is: ', this.state.tokenDemocraticContractBalance);\n\t\t\t}\n\t\t});\n\t}\n\n\tonHandleClick = (e) => {\n\t\te.preventDefault();\n\t\tvar current = document.getElementsByClassName('active');\n\t\tcurrent[0].className = current[0].className.replace('active', '');\n\t\te.target.className += 'active';\n\t\tconst name = e.target.name;\n\n\t\tswitch (name) {\n\t\tcase 'Ethereum': \n\t\tif (this.state.Ethereum !== true) {\n\t\t\tthis.setState({ 'Ethereum': true });\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'ERC20': \n\t\tif (this.state.Ethereum === true) {\n\t\t\tthis.setState({ 'Ethereum': false });\n\t\t\t}\n\t\t\tbreak;   \n\t\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<div id=\"content\" className =\"smart\">\n\t\t\t\t<div className=\"btnGroup\">\n\t\t\t\t\t<button className=\"buttonInGroup active\" name=\"Ethereum\" onClick={this.onHandleClick}>Ethereum</button>\n\t\t\t\t\t<button className=\"buttonInGroup\" name=\"ERC20\" onClick={this.onHandleClick}>ERC20</button>\n\t\t\t\t</div>\n\t\t\t\t{\n\t\t\t\tthis.state.Ethereum ? \n\t\t\t\t<SmartContract \n\t\t\t\taddress={this.props.etherAddress} \n\t\t\t\tetherBalance={this.state.etherBalance}\n\t\t\t\tcontractBalance={this.state.contractBalance}\n\t\t\t\tupdateBalances={this.updateBalances}\n\t\t\t\tweb3={this.state.web3}\n\t\t\t\tmultisig={this.state.multisig} \n\t\t\t\tmultisigAddress={MULTISIG_ADDRESS}/>\n\t\t\t\t:\n\t\t\t\t<ERC20 \n\t\t\t\tweb3={this.state.web3}\n\t\t\t\taddress={this.props.etherAddress} \n\t\t\t\ttokenImperialBalance={this.state.tokenImperialBalance}\n\t\t\t\ttokenDemocraticBalance={this.state.tokenDemocraticBalance}\n\t\t\t\ttokenImperial={this.state.tokenImperial}\n\t\t\t\ttokenDemocratic={this.state.tokenDemocratic}\n\t\t\t\tmultisigERC20Address={MULTISIG_ERC20_ADDRESS}\n\t\t\t\tmultisigERC20Token={this.state.multisigERC20Token}\n\t\t\t\ttokenDemocraticContractBalance={this.state.tokenDemocraticContractBalance}\n\t\t\t\ttokenImperialContractBalance={this.state.tokenImperialContractBalance}\n\t\t\t\tupdateERCBalances={this.updateERCBalances}/>\n\t\t\t\t}\n\t\t\t</div>  \n\t\t);\n  }\n}\n\nexport default BlockchainData;\n"]},"metadata":{},"sourceType":"module"}